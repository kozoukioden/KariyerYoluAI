---
title: "Sequence DiyagramÄ± 4: OyunlaÅŸtÄ±rma ve Ä°lerleme Sistemi"
---
sequenceDiagram
    actor User as KullanÄ±cÄ±
    participant Home as HomePage
    participant Gam as Gamification<br/>Components
    participant Storage as Storage<br/>(lib/storage.ts)
    participant LS as localStorage

    Note over User,LS: Uygulama YÃ¼klenme

    User->>Home: UygulamayÄ± aÃ§
    Home->>Storage: storage.load()
    Storage->>LS: getItem('kariyeryolu_data')
    LS-->>Storage: JSON string
    Storage->>Storage: parse + streak kontrolÃ¼
    Storage-->>Home: UserData {xp:250, level:3, streak:5}

    Home->>Gam: StatsBar, LevelBadge, XPCounter, StreakFlame
    Gam->>User: âš¡250 XP | ğŸ”¥5 GÃ¼n | Lvl 3 Kalfa

    Note over User,LS: XP Kazanma

    User->>Home: Ders tamamla
    Home->>Storage: completeNode('fe_u2_n3', false)
    Storage->>Storage: 1. completedNodes.push(nodeId)<br/>2. base_xp = 10 (LESSON)<br/>3. streak_bonus = 5 Ã— 5 = 25<br/>4. total = 35 XP<br/>5. xp: 250 â†’ 285<br/>6. streak: 5 â†’ 6<br/>7. Achievement kontrol
    Storage->>LS: save(userData)
    Storage-->>Home: {xpGained: 35, newAchievements: []}

    Home->>Gam: XPGain(amount=35)
    Gam->>User: "+35 XP" yÃ¼zen animasyon â¬†ï¸<br/>Bar gÃ¼ncelle: âš¡285 XP | ğŸ”¥6 GÃ¼n

    Note over User,LS: Seviye Atlama

    User->>Home: Bir ders daha tamamla
    Home->>Storage: completeNode('fe_u2_n4', false)
    Storage->>Storage: xp: 285 + 35 = 320<br/>320 >= 300 â†’ Level UP!<br/>level: 3 â†’ 4 (Uzman)
    Storage-->>Home: {xpGained: 35}

    Home->>Gam: LevelBadge gÃ¼ncelle
    Gam->>User: Lvl 4 Uzman ğŸ“

    Note over User,LS: Rozet Kazanma

    User->>Home: Quiz'den %100 al
    Home->>Storage: completeNode('fe_u2_n5', true, 100)
    Storage->>Storage: xp += 40 (QUIZ_PERFECT)<br/>+ streak_bonus = 70 XP<br/>Achievement: perfect_quiz â†’ KAZANILDI!
    Storage->>Storage: achievements.push({<br/>id: 'perfect_quiz',<br/>name: 'Kusursuz',<br/>icon: 'ğŸ’¯'})
    Storage->>LS: save(userData)
    Storage-->>Home: {xpGained: 70,<br/>newAchievements: ['perfect_quiz']}

    Home->>Gam: XPGain(70)
    Gam->>User: "+70 XP" animasyonu

    Home->>Gam: AchievementPopup('perfect_quiz')
    Gam->>User: ğŸ‰ Rozet KazandÄ±nÄ±z!<br/>"Kusursuz ğŸ’¯"
    User->>Gam: "Harika!" tÄ±kla
    Gam->>Home: onClose()

    Note over User,LS: Profil GÃ¶rÃ¼ntÃ¼leme

    User->>Home: Profil menÃ¼sÃ¼ne tÄ±kla
    Home->>Storage: getStats() + getAchievements()
    Storage-->>Home: stats + achievements[]
    Home->>User: Profil SayfasÄ±:<br/>âš¡390 XP | ğŸ”¥6 GÃ¼n | ğŸ“š12 Ders | âœ…3 Quiz<br/>Rozetler: âœ…Ä°lk AdÄ±m, âœ…Kusursuz<br/>ğŸ”’TutarlÄ±, ğŸ”’Quiz UstasÄ±...
